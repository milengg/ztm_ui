<div class="p-6">
    <div id="vent-main">
        <div class="flex justify-between">
            <p class="font-roboto text-2xl">ВЕНТИЛАЦИЯ</p>
            <svg class="vent" id="vent-animation" width="59" height="59" viewBox="0 0 77 77" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M75.9333 35.0433C74.943 32.2436 72.6004 29.9963 69.6484 29.0059C67.3629 28.2441 64.868 27.8442 62.2398 27.8442C56.6405 27.8442 50.4317 29.6154 44.261 32.9864C44.1849 33.0245 44.1087 33.0435 44.0134 33.0435C43.9373 33.0435 43.8611 33.0245 43.7849 32.9864C43.7087 32.9483 43.6706 32.9102 43.6325 32.8721C43.4611 32.7388 43.385 32.5103 43.4421 32.3008C44.5658 28.8536 46.5655 24.816 48.5462 21.9973C50.2793 19.5404 52.9076 17.7692 55.9358 17.0455L60.4495 15.979C61.4589 15.7314 62.2969 14.9886 62.6778 13.9983C63.0397 13.0079 62.9254 11.9604 62.354 11.1224C57.8022 4.58991 49.1747 0 41.3662 0C39.1569 0 37.0238 0.36186 35.0431 1.06653C32.2625 2.05689 30.0152 4.39946 29.0248 7.35147C26.6061 14.5887 28.0154 23.5971 33.0243 32.7388C33.1005 32.8912 33.1005 33.0626 33.0243 33.2149C32.9862 33.2911 32.9481 33.3292 32.9101 33.3673C32.8148 33.5006 32.6625 33.5768 32.4911 33.5768C32.4339 33.5768 32.3768 33.5768 32.3387 33.5578C28.8915 32.4341 24.8539 30.4343 22.0352 28.4536C19.5784 26.7205 17.8072 24.0923 17.0834 21.0641L15.9979 16.5503C15.7503 15.5409 15.0075 14.7029 14.0172 14.322C13.6553 14.1887 13.2744 14.1125 12.8744 14.1125C12.2459 14.1125 11.6555 14.303 11.1413 14.6458C3.48512 19.9404 -2.53318 31.8818 1.06637 41.9567C2.05673 44.7373 4.39929 46.9847 7.37036 47.975C9.65579 48.7368 12.1698 49.1368 14.798 49.1368C20.3783 49.1368 26.6061 47.3465 32.7767 43.9755C32.8529 43.9374 32.9291 43.9184 33.0243 43.9184C33.1005 43.9184 33.1767 43.9374 33.2529 43.9755C33.3291 44.0136 33.3671 44.0517 33.4052 44.0898C33.5766 44.2231 33.6528 44.4516 33.5957 44.6611C32.472 48.1083 30.4723 52.1459 28.4916 54.9646C26.7584 57.4215 24.1302 59.1927 21.102 59.9164L16.5692 61.002C15.5598 61.2496 14.7218 61.9923 14.3409 62.9827C13.9791 63.954 14.0933 65.0396 14.6647 65.8585C19.1975 72.4291 27.825 77.0191 35.6526 77.0191C37.8618 77.0191 39.9949 76.6572 41.9566 75.9525C44.7372 74.9622 46.9845 72.6196 47.9749 69.6676C50.3936 62.4304 48.9843 53.422 43.9754 44.2802C43.8992 44.1279 43.8992 43.9565 43.9754 43.8041C44.0134 43.7279 44.0515 43.6898 44.0896 43.6517C44.1849 43.5184 44.3372 43.4423 44.5086 43.4423C44.5658 43.4423 44.6229 43.4422 44.661 43.4613C48.1272 44.604 52.0696 46.5466 54.9645 48.5654C57.4213 50.2985 59.1925 52.9268 59.9162 55.955L60.9828 60.4687C61.2304 61.4781 61.9731 62.3161 62.9635 62.697C63.3253 62.8303 63.7063 62.9065 64.0872 62.9065C64.7157 62.9065 65.3251 62.7161 65.8203 62.3732C73.5146 57.0596 79.5329 45.1182 75.9333 35.0433ZM31.3103 42.2234C25.5776 45.2896 19.864 46.9275 14.7599 46.9275C12.3793 46.9275 10.1319 46.5847 8.07503 45.8991C5.77055 45.1182 3.92316 43.3661 3.16135 41.233C0.0188832 32.396 5.40869 21.3117 12.3983 16.4742C12.3983 16.4742 12.4174 16.4742 12.4174 16.4551C12.5697 16.3599 12.7221 16.3218 12.8935 16.3218C13.0078 16.3218 13.122 16.3408 13.2173 16.3789C13.2363 16.3789 13.2553 16.398 13.2553 16.398C13.5601 16.5503 13.7315 16.7598 13.8077 17.0455L14.8742 21.5402C15.7312 25.1017 17.8072 28.187 20.7211 30.2248C23.5207 32.2055 27.4441 34.1862 30.9674 35.4051C31.2341 35.5004 31.3674 35.7861 31.2912 36.0336C31.0055 36.9478 30.8722 37.7287 30.8722 38.4714C30.8722 39.5189 31.1008 40.5474 31.5198 41.5377C31.6531 41.8044 31.5578 42.09 31.3103 42.2234ZM31.1198 8.07519C31.9007 5.77072 33.6528 3.92332 35.7859 3.16151C37.5 2.55207 39.3474 2.24734 41.309 2.24734C48.3748 2.24734 56.45 6.51348 60.5257 12.4175C60.5257 12.4175 60.5257 12.4366 60.5447 12.4366C60.6971 12.6841 60.7161 12.9698 60.6209 13.2365C60.6209 13.2555 60.6019 13.2745 60.6019 13.2745C60.4495 13.5793 60.24 13.7507 59.9543 13.8269L55.4597 14.8934C51.8982 15.7504 48.8129 17.8264 46.775 20.7403C44.7943 23.5399 42.8136 27.4633 41.5947 30.9866C41.5185 31.1961 41.3281 31.3295 41.1186 31.3295C41.0614 31.3295 41.0233 31.3295 40.9662 31.3104C40.052 31.0247 39.2712 30.8914 38.5284 30.8914C37.4809 30.8914 36.4525 31.12 35.4621 31.539C35.3859 31.5771 35.3288 31.577 35.2526 31.577C35.0622 31.577 34.8908 31.4818 34.7955 31.3104C30.2437 22.8543 28.9486 14.5887 31.1198 8.07519ZM33.1196 38.5095C33.1196 35.5385 35.5383 33.1197 38.5094 33.1197C41.4804 33.1197 43.8992 35.5385 43.8992 38.5095C43.8992 41.4806 41.4804 43.8993 38.5094 43.8993C35.5383 43.8803 33.1196 41.4806 33.1196 38.5095ZM45.8799 68.9248C45.099 71.2293 43.3469 73.0767 41.2138 73.8385C39.4997 74.4479 37.6523 74.7527 35.6907 74.7527C28.6249 74.7527 20.5497 70.4865 16.474 64.5825C16.474 64.5825 16.474 64.5634 16.4549 64.5634C16.3026 64.3349 16.2835 64.0492 16.3788 63.7635C16.3788 63.7445 16.3978 63.7064 16.4169 63.6874C16.5692 63.3826 16.7787 63.2112 17.0644 63.1351L21.5591 62.0685C25.1205 61.2115 28.2059 59.1356 30.2437 56.2216C32.2244 53.422 34.2051 49.4986 35.424 45.9753C35.5002 45.7658 35.6907 45.6325 35.9002 45.6325C35.9573 45.6325 36.0144 45.6325 36.0525 45.6515C36.9477 45.9372 37.7285 46.0895 38.4713 46.0895C39.5188 46.0895 40.5472 45.861 41.5376 45.442C41.6137 45.4039 41.6709 45.4039 41.7471 45.4039C41.9375 45.4039 42.1089 45.4991 42.2041 45.6705C46.756 54.1457 48.051 62.4113 45.8799 68.9248ZM64.6014 60.5068C64.6014 60.5068 64.5823 60.5068 64.5823 60.5258C64.43 60.6211 64.2776 60.6592 64.1062 60.6592C64.011 60.6592 63.8967 60.6401 63.7824 60.602C63.7634 60.602 63.7253 60.583 63.7063 60.5639C63.4015 60.4116 63.2301 60.2021 63.1539 59.9164L62.0874 55.4217C61.2304 51.8603 59.1544 48.7749 56.2405 46.7371C53.4028 44.7564 49.4794 42.7566 45.9942 41.5568C45.7275 41.4615 45.5942 41.1759 45.6704 40.9092C45.9561 40.0522 46.1084 39.2523 46.1084 38.5095C46.1084 37.462 45.8799 36.4336 45.4609 35.4432C45.3466 35.1957 45.4418 34.91 45.6894 34.7767C51.4221 31.7104 57.1356 30.0915 62.2398 30.0915C64.6204 30.0915 66.8678 30.4343 68.9247 31.12C71.2291 31.9008 73.0765 33.653 73.8383 35.7861C76.9808 44.604 71.591 55.6884 64.6014 60.5068Z" fill="#2ACCB5"/>
            </svg>
        </div>
        <div class="text-center my-16">
            <p id="vent-value" class="font-roboto text-8xl">
                {{$ventDBValue->value}}<span class="font-roboto text-6xl absolute pt-1 pl-2">%</span>
            </p>
        </div>
        <div class="range-slider">
            <input id="vent" type="range" value="{{$ventDBValue->value}}" step="10" min="0" max="100"/>
        </div>
    </div>
</div>
@push('js')
<script>
    const ventContainer = document.getElementById('vent-main');
    const ventRange = document.getElementById('vent');
    const svg = document.getElementById('vent-animation');
    const ventPath = svg.querySelector('path');

    const ventObject = [
      { value: 30, class: 'text-teal-custom' },
      { value: 60, class: 'text-yellow-custom' },
      { value: 80, class: 'text-red-main' },
    ];

    let rotation = 0;

    function rotateVent()
    {
        const ventRangeValue = parseInt(ventRange.value);
        if(ventRangeValue == 0)
        {
            rotation += 0;
        } else if(ventRangeValue <= 30) {
            rotation += 4;
        } else if(ventRangeValue <= 60) {
            rotation += 6;
        } else if(ventRangeValue <= 100) {
            rotation += 10;
        }
        ventPath.setAttribute('transform', `rotate(${rotation})`);
        ventPath.setAttribute('transform-origin', `center`);
        ventPath.setAttribute('overflow', `visible`);
        requestAnimationFrame(rotateVent);
    }

    function updateVent() {
      const value = parseInt(ventRange.value);
      const vent = ventObject.reduce((prev, curr) => {
        return curr.value <= value ? curr : prev;
      }, ventObject[0]);

      const newClass = vent.class;
      const oldClass = ventContainer.getAttribute('class');

      if(oldClass) {
        ventContainer.classList.remove(oldClass);
      }
      ventContainer.classList.add(newClass);
    }

    ventRange.addEventListener('input', updateVent);
    rotateVent();
    updateVent();
</script>
@endpush